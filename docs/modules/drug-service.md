# 藥品服務模組 (Drug Service)

## 模組概述
藥品服務模組整合了台灣衛生福利部食品藥物管理署（TFDA）的藥品許可證資料庫，提供權威且即時的藥品資訊查詢服務。本模組支援從一般民眾的用藥查詢到醫療專業人員的處方分析等多種應用場景。

## 主要功能

### 1. 藥品查詢
提供全方位的藥品搜尋機制：
- **名稱搜尋**：支援中文名、英文名查詢（例如：「普拿疼」、「Panadol」）。
- **適應症搜尋**：可透過症狀或疾病名稱搜尋相關藥品（例如：「頭痛」、「高血壓」）。
- **證號查詢**：支援精確的許可證字號查詢。

### 2. 詳細藥品資訊
提供每一項藥品的完整查驗登記資料：
- **基本資料**：許可證字號、類別、劑型、有效日期。
- **成份內容**：主成分（Active Ingredients）及其含量。
- **仿單資訊**：適應症、用法用量、副作用、禁忌與注意事項。
- **外觀描述**：藥品的顏色、形狀、標記等特徵。
- **電子仿單**：提供官方 PDF 仿單連結。

### 3. 未知藥丸辨識 (Pill Identification)
利用藥品外觀特徵資料庫，協助識別不明藥物，這對於急診室或居家用藥安全至關重要。
- **特徵比對**：輸入特徵關鍵字（如「白色 圓形 YP」）。
- **圖像輔助**：回傳可能的藥品清單與詳細外觀描述，協助使用者確認。

### 4. 藥物治療分析 (Treatment Analysis)
與 ICD 服務模組結合，提供初步的處方合理性分析（由 `analyze_treatment_plan` 工具實作）：
- **適應症比對**：確認藥品適應症是否符合診斷。
- **禁忌症篩查**：檢查是否有明顯的用藥安全疑慮。

## 資料來源
- **主要來源**：台灣 FDA 開放資料平台（Open Data）。
- **更新機制**：系統定期從 FDA API 獲取最新藥品許可證資料，並進行 ETL（擷取、轉換、載入）處理至本地 SQLite 資料庫。

## 應用場景
1. **臨床決策支援**：醫師開立處方時的快速參考。
2. **藥事服務**：藥師進行藥物諮詢與衛教的輔助工具。
3. **民眾用藥安全**：協助一般民眾辨識藥物與了解副作用。

## 依賴關係
本模組提供基礎藥品數據，並支援以下服務：
- **FHIR Medication Service**：將台灣藥品資料轉換為 FHIR Medication 資源。
